function getStyle(b,a){return(b.currentStyle||getComputedStyle(b,false))[a]}function startMove(f,d,c){c=c||{};c.easing=c.easing||"ease-out";c.duration=c.duration||700;clearInterval(f.timer);var e=Math.floor(c.duration/30);var h={};var a={};for(var b in d){h[b]=parseFloat(getStyle(f,b));a[b]=d[b]-h[b]}var g=0;f.timer=setInterval(function(){g++;for(var j in d){switch(c.easing){case"linear":var i=g/e;var k=h[j]+i*a[j];break;case"ease-in":var i=g/e;var k=h[j]+Math.pow(i,3)*a[j];break;case"ease-out":var i=1-g/e;var k=h[j]+(1-Math.pow(i,3))*a[j];break}if(j=="opacity"){f.style.opacity=k;f.style.filter="alpha(opacity:"+k*100+")"}else{f.style[j]=k+"px"}}if(g==e){clearInterval(f.timer);c.complete&&c.complete()}},30)};
window.onload=function(){var k=document.getElementById("ul1");var a=k.children;var d=document.getElementById("btn1");var h=20;var g=[];d.onclick=function(){g.sort(function(){return Math.random()-0.5});for(var l=0;l<a.length;l++){startMove(a[l],g[a[l].index])}};for(var e=0;e<a.length;e++){g[e]={left:a[e].offsetLeft,top:a[e].offsetTop}}for(var e=0;e<a.length;e++){a[e].style.left=g[e].left+"px";a[e].style.top=g[e].top+"px";a[e].style.position="absolute";a[e].style.margin=0}for(var e=0;e<a.length;e++){f(a[e]);a[e].index=e}function f(i){i.onmousedown=function(o){var l=o||event;var n=l.clientX-i.offsetLeft;var m=l.clientY-i.offsetTop;i.style.zIndex=h++;clearInterval(i.timer);document.onmousemove=function(r){var p=r||event;i.style.left=p.clientX-n+"px";i.style.top=p.clientY-m+"px";for(var q=0;q<a.length;q++){a[q].className=""}var s=c(i);if(s){s.className="box"}};document.onmouseup=function(){document.onmousemove=null;document.onmouseup=null;i.releaseCapture&&i.releaseCapture();var q=c(i);if(q){startMove(q,g[i.index]);startMove(i,g[q.index]);q.className="";var p;p=i.index;i.index=q.index;q.index=p}else{startMove(i,g[i.index])}};i.setCapture&&i.setCapture();return false}}function c(o){var n=new Date().getTime();var p=-1;for(var m=0;m<a.length;m++){if(o==a[m]){continue}if(b(o,a[m])){var l=j(o,a[m]);if(l<n){n=l;p=m}}}if(p==-1){return null}else{return a[p]}}function b(p,n){var o=p.offsetLeft;var l=p.offsetLeft+p.offsetWidth;var r=p.offsetTop;var t=p.offsetTop+p.offsetHeight;var m=n.offsetLeft;var i=n.offsetLeft+n.offsetWidth;var q=n.offsetTop;var s=n.offsetTop+n.offsetHeight;if(l<m||o>i||t<q||r>s){return false}else{return true}}function j(n,m){var l=n.offsetLeft-m.offsetLeft;var i=n.offsetTop-m.offsetTop;return Math.sqrt(l*l+i*i)}};